# copied from species.nbnatlas.org:/data/nbn-bie/config

bie.index.url=https://species-ws.nbnatlas.org
grails.serverURL=https://species.nbnatlas.org


# Query contexts - used to filter search results
bieService.queryContext = fq\=idxtype:TAXON&fq\=listMembership_m_s:"INNS of Interest to Wales July 2018"
biocacheService.queryContext = cl28:Wales
#-occurrence_status:absent

# Skin options
skin.layout=generic
skin.fluidLayout=
skin.orgNameLong=NBN Atlas
skin.orgNameShort=NBN Atlas
skin.favicon=https://layout.nbnatlas.org/uk/favicon.ico

# ALA services
biocache.baseURL=https://records.nbnatlas.org
biocacheService.baseURL=https://records-ws.nbnatlas.org
spatial.baseURL=https://spatial.nbnatlas.org
collectory.baseURL=https://registry.nbnatlas.org
speciesList.baseURL=https://lists.nbnatlas.org
alerts.baseUrl=https://alerts.nbnatlas.org
regions.baseURL=https://regions.nbnatlas.org
sightings.guidUrl=
eol.lang=en
external.eol.search.service=https://eol.org/api/search/1.0.json?q={0}&page=1&exact=true&cache_ttl=
external.eol.page.service=https://eol.org/api/pages/1.0/{0,number,#0}.json?images_per_page=0&videos_per_page=0&sounds_per_page=0&maps_per_page=0&texts_per_page=30&subjects=overview&licenses=all&details=true&references=true&vetted=0&cache_ttl=

# Mapping options
defaultDecimalLatitude=52.4153
defaultDecimalLongitude=-4.0829
defaultZoomLevel=7
map.smapQueryimpleMapButton=true
map.simpleMapButton=true

## NBN new items:
map.env.legendtitle=Verification status

#if using automatic legend from biocache then add colormode and legendhidemaxrange option
#map.env.options=colormode:identification_verification_status;name:circle;size:4;opacity:0.8
#map.env.legendhidemaxrange=true

#if using custom legend add layerfq options, labels and colours (same number of each and | delimited)
map.env.options=name:circle;size:4;opacity:0.8
map.layers.fqs=identification_verification_status:("Unconfirmed" OR "Unconfirmed - plausible" OR "Unconfirmed - unreviewed")|identification_verification_status:("Accepted" OR "Accepted - considered correct" OR "Accepted - correct" OR "verified")
map.layers.labels=Unconfirmed|Accepted
map.layers.colours=FFC0CB|E6704C

# Images
image.thumbnailUrl=https://images.nbnatlas.org/image/proxyImageThumbnail?imageId=
image.baseURL=https://images.nbnatlas.org
ala.image.service.url=https://images.nbnatlas.org

# Facets displayed on search page
facets=listMembership_m_s,riskAssessment_m_s,riskAssessmentImpact_m_s,managementPlans_m_s,rk_kingdom,imageAvailable,speciesGroup,rk_genus,habitat_s
##idxtype removed. Note facet fields do not need to be included in species-ws config additionalFields, but if they must be displayed then they must be
##locatedInHubCountry is only UK/not, not specific country; distribution can be used to indicate occ recs in country [x]

# CAS Authentication
casProperties=casServerLoginUrl,serverName,centralServer,casServerName,uriFilterPattern,uriExclusionFilterPattern,authenticateOnlyIfLoggedInFilterPattern,casServerLoginUrlPrefix,gateway,casServerUrlPrefix,contextPath
serverName=https://species.nbnatlas.org
contextPath=
casServerName=https://auth.nbnatlas.org
uriFilterPattern=/admin.*,/alaAdmin.*
uriExclusionFilterPattern=/images.*,/css.*,/js.*,/less.*
authenticateOnlyIfLoggedInFilterPattern=
security.cas.appServerName=https://species.nbnatlas.org
security.cas.casServerUrlPrefix=https://auth.nbnatlas.org/cas
casServerUrlPrefix=https://auth.nbnatlas.org/cas
casServerLoginUrl=https://auth.nbnatlas.org/cas/login
gateway=false
disableCAS=true
#otherwise cannot load occurrence map 
security.cas.bypass=true

supportEmail=admin@nbnatlas.org

occurrenceCounts.enabled=true
additionalMapFilter=
# was fq\=occurrence_status:present but this should only be specified if not mapping present/absent records separately
additionalResultsFields=taxonGroup_s,establishmentStatus_s,listMembership_m_s,riskAssessment_m_s,managementPlans_m_s,habitat_s
# make sure these fields are listed in bie-index config.additionalResultFields otherwise ignored


# Header and footer
headerAndFooter.baseURL=https://layout.nbnatlas.org/wales/commonui-bs3
ala.base=URL=https://species.nbnatlas.org
bie.baseURL=https://species.nbnatlas.org
bie.searchPath=/search

#INNS config:
nbn.inns=true
nbn.alwaysshowdownloadbutton=true
#otherwise if idxtype is not a facet it is omitted
nbn.innsSpeciesCount = 310
species.additionalHeadlines=establishmentMeans,establishmentStatus_s
#species.additionalHeadlinesSpeciesList=dr1818
species.showNNSSlink=true
#species.listLinks.json=[{"specieslist":"dr1855", "url":"http://www.nonnativespecies.org/index.cfm?pageid=174", "label":"Biosecurity - Biosecurity in the field"},{"specieslist":"dr1856","url":"http://www.nonnativespecies.org/checkcleandry/","label":"Biosecurity - Check-Clean-Dry"},{"specieslist":"dr1857", "url":"https://naturalresources.wales/guidance-and-advice/environmental-topics/woodland-management/tree-health-and-biosecurity/biosecurity/?lang=en", "label":"Biosecurity - Keep it Clean - Biosecurity"},{"specieslist":"dr1858", "url":"https://secure.fera.defra.gov.uk/nonnativespecies/downloadDocument.cfm?id=1453", "label":"Biosecurity - Marine Invasive Non-Native Plants"},{"specieslist":"dr1859", "url":"http://www.nonnativespecies.org/beplantwise/", "label":"Biosecurity - Be plant wise"},{"specieslist":"dr1860", "url":"http://www.nonnativespecies.org/beplantwise/knowwhatyougrow/", "label":"Biosecurity - Know what you grow"}]
#this can now support the following extensions, where urls that don't look like http(s) are read from the matching field in the species list, and force-new-tab links can be specified:
species.listLinks.json=[{"specieslist":"dr1957", "url":"Habitas", "label":"NMNI Habitas", "openExternal":"true"},{"specieslist":"dr1958","url":"Habitas","label":"NI Priority species", "openExternal":"true"}]

biocacheService.altQueryContext=(cl28:Wales OR cl104:"Wales 20km terrestrial buffer")

search.includeFreeTextFilterOnResults=true
search.hideFacetsThatDoNotFilterFurther=true
search.tagIfInList=dr1818
search.tagIfInListHTML=<span style\='margin-left:5px'><img src='/assets/alert.png'/></span>
search.defaultSortField=scientificName
search.defaultSortOrder=asc
search.defaultRows=20
search.speciesLimit=320
search.showZeroOccurrences=true
search.additionalMapFilter=

species.mapResults=true
species.mapPresenceAndAbsence=true

search.mapResults=true
search.mapPresenceAndAbsence=true

#if bieService.queryContext changes, or the list membership changes, then generate QID by visiting URL/search?includeRecordsFilter=biocacheService-altQueryContext&q=*%3A*&rows=320 (if the main list goes above 320 items this needs to be changed and also adjust search.speciesLimit (ignore 'Results per page' shown) and click on 'Occurrence records'. Take this QID and replace as needed below 
search.viewall=https://wales-records-inns.nbnatlas.org/occurrences/search?q=qid:1531144615913
download.allcsv=https://records-ws.nbnatlas.org/occurrences/index/download?q=qid:1531144615913&reasonTypeId=13
download.allshp=https://records-ws.nbnatlas.org/occurrences/index/download?q=qid:1531144615913&reasonTypeId=13&fileType=shp

#New NI-derived functionality:
#species lists with region = nbn.region are promoted to top of the list and highlighted
nbn.region=Northern Ireland
#allow an alternate compact listing, with species names only
search.compactResults=true
search.compactResultsRows=500
#grouping for the compact listing, expandable to display taxa within it
search.compactResultsGroupBy=taxonGroup_s
#allow for normal species results page to operate in tandem. The compact result listing is only shown when there is a page parameter compact=true
search.compactResultsOnlyWhenPageParam=true
#optionally, remove the facet filter tool from the compact results
search.compactResultsRemoveFacets=true
#hide non-specified facet values from the facet filtering tool to limit users to pick from the provided list
facetsOnlyShowValues=[{"facet":"listMembership_m_s","values":["Northern Ireland Priority Species"]}]